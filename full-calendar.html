<!DOCTYPE html>
<html lang="am">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<title>Liturgical Calendar - Debre Genet</title>
<style>
  /* --- GLOBAL BRANDING --- */
  :root {
    --text-primary: #630F16;      /* Deep Burgundy */
    --accent-gold: #D4A017;       /* Gold */
    --bg-page: #F9E8B2;           /* Page Background */
    --bg-card: #FFF8E1;           /* Cream Card */
    --white: #ffffff;
    --glass: rgba(99, 15, 22, 0.96);
    --subtle-silver: #C0C0C0;
  }

  body { 
    margin: 0; padding: 0; 
    background: var(--bg-page); 
    font-family: 'Nyala', 'Abyssinica SIL', serif; 
    color: var(--text-primary);
    overflow-x: hidden;
  }

  /* 1. NAVIGATION (Same as Sponsorship Page) */
  .main-nav {
    position: fixed; top: 0; width: 100%; height: 80px;
    background: var(--glass);
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 5%; z-index: 9999;
    border-bottom: 3px solid var(--accent-gold);
    backdrop-filter: blur(12px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
  }
  
  .nav-brand-group { display: flex; align-items: center; gap: 15px; text-decoration: none; }
  .logo-sample {
    width: 45px; height: 45px; background: var(--accent-gold); border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 28px; color: var(--text-primary); border: 2px solid white;
  }
  .nav-brand-text { color: var(--accent-gold); font-weight: 900; font-size: 18px; letter-spacing: 1px; }

  .nav-links { display: flex; gap: 5px; height: 100%; align-items: center; }
  .menu-item { position: relative; height: 100%; display: flex; align-items: center; }
  .menu-item > a {
    color: #FDF5E6; text-decoration: none; font-weight: bold; font-size: 12px;
    padding: 0 15px; text-transform: uppercase; transition: 0.3s;
    height: 100%; display: flex; align-items: center;
  }
  .active-page { background: var(--accent-gold) !important; color: var(--text-primary) !important; }

  .sub-menu {
    position: absolute; top: 80px; left: 0;
    background: var(--glass); min-width: 220px;
    display: none; flex-direction: column;
    border: 1px solid var(--accent-gold); border-top: none;
    box-shadow: 0 15px 30px rgba(0,0,0,0.4);
  }
  .sub-menu a {
    color: #FDF5E6; padding: 12px 20px; text-decoration: none;
    font-size: 11px; text-transform: uppercase; border-bottom: 1px solid rgba(255,255,255,0.05);
  }
  .sub-menu a:hover { background: var(--accent-gold); color: var(--text-primary); }
  .menu-item:hover .sub-menu { display: flex; }

  .btn-live {
    background: #FF0000; color: white !important; padding: 8px 16px; border-radius: 50px;
    display: flex; align-items: center; gap: 8px; font-weight: 900 !important; 
    margin-left: 10px; border: 1px solid white; text-decoration: none; font-size: 11px;
  }

  .menu-toggle { display: none; color: var(--accent-gold); font-size: 32px; cursor: pointer; }

  @media (max-width: 1100px) {
    .menu-toggle { display: block; z-index: 10001; }
    .nav-links {
      position: fixed; top: 0; right: -100%; width: 80%; height: 100vh;
      background: var(--text-primary); flex-direction: column;
      align-items: flex-start; padding: 100px 30px; transition: 0.4s ease-in-out;
    }
    .nav-links.active { right: 0; }
    .menu-item { width: 100%; height: auto; flex-direction: column; align-items: flex-start; }
    .menu-item > a { width: 100%; height: 50px; font-size: 16px; border-bottom: 1px solid rgba(255,255,255,0.1); justify-content: space-between; }
    .sub-menu { position: static; display: none; width: 100%; background: rgba(0,0,0,0.2); }
    .menu-item.open .sub-menu { display: flex; }
  }

  /* 2. CALENDAR PAGE WRAPPER */
  .wrapper { max-width: 1100px; margin: 100px auto 40px auto; padding: 20px; box-sizing: border-box; }
  
  .section-header { 
    text-align: center; 
    padding: 40px 20px; 
    background: var(--bg-card); 
    width: 100%; 
    border-top: 8px double var(--accent-gold); 
    border-bottom: 8px double var(--accent-gold); 
    box-sizing: border-box;
    margin-bottom: 30px;
  }
  .info-title { color: var(--text-primary); font-size: clamp(24px, 5vw, 32px); font-weight: bold; margin: 0; }
  .info-subtitle { color: var(--accent-gold); font-size: 14px; text-transform: uppercase; letter-spacing: 3px; margin-top: 8px; font-weight: 800; }

  /* DASHBOARD / LEGEND */
  .info-dashboard { 
    background: var(--bg-card); 
    border: 1px solid var(--accent-gold); 
    padding: 20px; 
    margin-bottom: 25px; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
  }
  .legend-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
    gap: 15px; 
    font-size: 13px; 
    padding-top: 15px;
  }
  .legend-item { display: flex; align-items: center; gap: 8px; font-weight: bold; }
  .swatch { width: 20px; height: 20px; border-radius: 3px; border: 1px solid rgba(0,0,0,0.1); }

  /* CALENDAR CONTROLS */
  .cal-header { 
    background: var(--text-primary); 
    color: var(--accent-gold); 
    padding: 15px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    border-radius: 4px 4px 0 0; 
    border-bottom: 3px solid var(--accent-gold);
  }
  .nav-btn { 
    background: transparent; 
    border: 1px solid var(--accent-gold); 
    color: var(--accent-gold); 
    padding: 8px 20px; 
    border-radius: 4px; 
    cursor: pointer; 
    font-weight: bold; 
    text-transform: uppercase;
    transition: 0.3s;
  }
  .nav-btn:hover { background: var(--accent-gold); color: var(--text-primary); }
  
  /* GRID STYLING */
  .grid { 
    display: grid; 
    grid-template-columns: repeat(7, 1fr); 
    grid-auto-rows: minmax(110px, auto); 
    background: var(--accent-gold); 
    gap: 1px; 
    border: 1px solid var(--accent-gold); 
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }
  .weekday { 
    background: #EEDC9A; 
    text-align: center; 
    padding: 12px 0; 
    font-weight: 800; 
    color: var(--text-primary); 
    font-size: 12px; 
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  
  .cell { 
    background: var(--white); 
    padding: 8px; 
    position: relative; 
    display: flex; 
    flex-direction: column; 
    transition: all 0.2s; 
    overflow: hidden;
  }
  .cell.clickable { cursor: pointer; }
  .cell.clickable:hover { background: #fffdf0; transform: scale(1.02); z-index: 2; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
  .cell.today { outline: 3px solid var(--text-primary); outline-offset: -3px; z-index: 1; }
  
  .cell.fast { background: #FFF0F0; } 
  .cell.feast { background: #FFFCF2; } 
  
  .day-greg { font-weight: 900; font-size: 18px; color: #333; }
  .day-eth { font-size: 11px; color: var(--text-primary); position: absolute; top: 6px; right: 8px; font-weight: 800; }
  
  /* TAGS */
  .tag { font-size: 9px; padding: 3px 5px; border-radius: 2px; margin-top: 3px; font-weight: bold; line-height: 1.2; text-transform: uppercase; }
  .tag-angel { color: var(--text-primary); font-style: italic; border-bottom: 1px solid rgba(0,0,0,0.05); font-size: 10px; margin-bottom: 4px; display: block; }
  .tag-tabot { background: var(--accent-gold); color: var(--text-primary); text-align: center; border: 1px solid var(--text-primary); font-size: 8px; }
  .tag-boundary { background: var(--text-primary); color: white; text-align: center; border: 1px solid var(--accent-gold); padding: 4px; }
  .tag-feast { background: #FFF3E0; color: #E65100; border: 1px solid #FFCCBC; }
  .tag-ss { background: #E3F2FD; color: #1565C0; border: 1px solid #BBDEFB; }
  .tag-gen { background: #F3E5F5; color: #7B1FA2; border: 1px solid #E1BEE7; }

  /* MODAL */
  .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(99, 15, 22, 0.8); z-index: 9999; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
  .modal-content { 
    background: var(--bg-card); 
    padding: 30px; 
    width: 90%; 
    max-width: 450px; 
    border-radius: 0; 
    border: 2px solid var(--accent-gold);
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    max-height: 85vh; 
    overflow-y: auto; 
    position: relative;
  }
  .modal-content::before {
    content: "‚ô∞"; position: absolute; top: 10px; right: 20px; color: var(--accent-gold); font-size: 24px; opacity: 0.3;
  }

  .jump-btn {
    width: 100%; margin-top: 20px; padding: 15px; 
    background: var(--text-primary); color: var(--accent-gold); 
    border: 1px solid var(--accent-gold); cursor: pointer; 
    font-weight: 900; letter-spacing: 2px; text-transform: uppercase;
    transition: 0.3s;
  }
  .jump-btn:hover { background: var(--accent-gold); color: var(--text-primary); }

  @media (max-width: 600px) {
    .grid { grid-auto-rows: minmax(80px, auto); }
    .day-greg { font-size: 14px; }
    .tag { font-size: 8px; }
    .nav-btn { padding: 8px 10px; font-size: 12px; }
  }
</style>
</head>
<body>

<nav class="main-nav">
  <a href="index.html" class="nav-brand-group">
    <div class="logo-sample">‚ú•</div>
    <div class="nav-brand-text">DEBRE GENET</div>
  </a>
  <div class="menu-toggle" onclick="toggleMenu()">‚ò∞</div>
  <div class="nav-links" id="navLinks">
    <div class="menu-item"><a href="javascript:void(0)" onclick="toggleSub(this)">HOME ‚ñæ</a>
      <div class="sub-menu"><a href="clergy.html">Clergy</a><a href="services.html">Services</a><a href="about.html">About Us</a></div>
    </div>
    <div class="menu-item"><a href="javascript:void(0)" onclick="toggleSub(this)">MINISTRIES ‚ñæ</a>
      <div class="sub-menu"><a href="ministry-hub.html">Ministry Hub</a><a href="sunday-school.html">Sunday School</a><a href="abinet.html">·ä†·â•·äê·âµ School</a><a href="pastoral-care.html">Pastoral Care</a><a href="sponsorship.html">Sponsorship</a></div>
    </div>
    <div class="menu-item"><a href="javascript:void(0)" onclick="toggleSub(this)">CALENDAR ‚ñæ</a>
      <div class="sub-menu"><a href="full-calendar.html">Monthly Calendar</a><a href="upcoming.html">Upcoming Events</a></div>
    </div>
    <div class="menu-item"><a href="javascript:void(0)" onclick="toggleSub(this)">PAYMENTS ‚ñæ</a>
      <div class="sub-menu"><a href="donations.html">Donations</a><a href="building.html">Building Project</a></div>
    </div>
    <div class="menu-item"><a href="contact.html">CONTACT US</a></div>
    <a href="https://youtube.com/live" target="_blank" class="btn-live">‚óè LIVE NOW</a>
  </div>
</nav>

<div class="wrapper">
  
  <div class="section-header">
    <div class="info-title">·ã®·â§·â∞·ä≠·à≠·àµ·â≤·ã´·äï ·àò·âÅ·å†·à™·ã´</div>
    <div class="info-subtitle">Liturgical Calendar 2026</div>
  </div>

  <div class="info-dashboard">
    <div class="legend-grid">
      <div class="legend-item"><div class="swatch" style="background:#FFF0F0;"></div> Fasting Season / ·åæ·àù</div>
      <div class="legend-item"><div class="swatch" style="background:#EEDC9A; border:1px solid var(--text-primary);"></div> Tabot / ·äï·åç·à•</div>
      <div class="legend-item"><div class="swatch" style="background:var(--text-primary);"></div> Start-End / ·åÄ·àù·à≠-·çç·åª·àú</div>
      <div class="legend-item"><div class="swatch" style="background:#FFF3E0;"></div> Major Feast / ·â†·ãì·àç</div>
    </div>
  </div>

  <div class="cal-header">
    <button class="nav-btn" onclick="moveMonth(-1)">‚ùÆ Prev</button>
    <div id="monthTitle" style="font-weight:900; font-size: 20px; letter-spacing: 1px;"></div>
    <button class="nav-btn" onclick="moveMonth(1)">Next ‚ùØ</button>
  </div>
  
  <div class="grid" id="calendarGrid"></div>
  
  <button class="jump-btn" onclick="goToday()">Jump to Today / ·ãà·ã∞ ·ãõ·à¨ ·â∞·àò·àà·àµ</button>
</div>

<div id="detailsModal" class="modal" onclick="this.style.display='none'">
  <div class="modal-content" onclick="event.stopPropagation()">
    <h2 id="modalTitle" style="color:var(--text-primary); margin-top:0; font-size: 22px; border-bottom: 2px solid var(--accent-gold); padding-bottom: 10px;"></h2>
    <div id="modalBody" style="font-size: 16px; margin-top: 20px;"></div>
    <button onclick="document.getElementById('detailsModal').style.display='none'" class="jump-btn" style="margin-top:25px;">CLOSE</button>
  </div>
</div>

<script>
  /* MENU TOGGLE LOGIC */
  function toggleMenu() { 
    document.getElementById('navLinks').classList.toggle('active'); 
  }

  function toggleSub(el) { 
    if (window.innerWidth <= 1100) {
      const parent = el.parentElement;
      const isOpen = parent.classList.contains('open');
      document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('open'));
      if (!isOpen) { parent.classList.add('open'); }
    } 
  }

  /* CALENDAR LOGIC */
  const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRMZieFTAsbcpW9ROmJzlRuVJv34SEYx-5q-jg40his0eVg0D5Jef5x4yFJvfWizjGToIBB1Ycu2KLE/pub?output=csv";
  let curr = new Date();
  let sheetEvents = [];

  const ethMonths = ["Meskerem", "Tikimt", "Hidar", "Tahsas", "Tir", "Yekatit", "Megabit", "Miyazia", "Ginbot", "Sene", "Hamle", "Nehase", "Pagume"];
  
  const monthlyAngels = { 
    1:"·àç·ã∞·â≥", 2:"·â≥·ã¥·ãé·àµ", 3:"·â†·ãì·àà ·ãà·àç·ãµ", 4:"·ãÆ·àê·äï·àµ", 5:"·å¥·å•·àÆ·àµ ·ãà·å≥·ãç·àé·àµ", 6:"·ä¢·ã®·à±·àµ", 7:"·à•·àã·à¥", 8:"·ä†·â£ ·ä™·àÆ·àµ", 9:"·â∂·àõ·àµ", 10:"·àò·àµ·âÄ·àç", 
    11:"·àê·äì ·àõ·à≠·ã´·àù", 12:"·àö·ä´·ä§·àç", 13:"·à®·çã·ä§·àç", 14:"·ä†·â°·äê ·ä†·à®·åã·ãä", 15:"·âÇ·à≠·âÜ·àµ", 16:"·ä™·ã≥·äê ·àù·àï·à®·âµ", 17:"·ä•·àµ·å¢·çã·äñ·àµ", 18:"·â∞·ä≠·àà ·àÉ·ã≠·àõ·äñ·âµ", 19:"·åà·â•·à≠·ä§·àç", 20:"·àï·äï·å∏·â≥", 
    21:"·àõ·à≠·ã´·àù", 22:"·ä°·à´·ä§·àç", 23:"·åä·ãÆ·à≠·åä·àµ", 24:"·â∞·ä≠·àà ·àÉ·ã≠·àõ·äñ·âµ", 25:"·àò·à≠·âÜ·à¨·ãé·àµ", 26:"·ä†·â°·äê ·àÄ·â•·â∞·àõ·à≠·ã´·àù", 27:"·àò·ãµ·äÉ·äî·ãì·àà·àù", 28:"·ä†·àõ·äë·ä§·àç", 29:"·ãà·àç·ãµ/·ä†·à≠·à¥·àõ", 30:"·àõ·à≠·âÜ·àµ" 
  };

  const fasts = [
    { n: "Prophets Fast / ·åæ·àò ·äê·â¢·ã´·âµ", s: "2025-11-25", e: "2026-01-06" },
    { n: "Nineveh Fast / ·åæ·àò ·äê·äê·ãå", s: "2026-02-02", e: "2026-02-04" },
    { n: "Great Lent / ·ãê·â¢·ã≠ ·åæ·àù", s: "2026-02-16", e: "2026-04-11" },
    { n: "Apostles Fast / ·åæ·àò ·àê·ãã·à≠·ã´·âµ", s: "2026-06-01", e: "2026-07-11" },
    { n: "Fast of Salvation / ·åæ·àò ·ãµ·àÖ·äê·âµ", s: "2026-06-01", e: "2026-07-11" },
    { n: "Filseta / ·åæ·àò ·çç·àç·à∞·â≥", s: "2026-08-07", e: "2026-08-21" },
    { n: "Prophets Fast / ·åæ·àò ·äê·â¢·ã´·âµ", s: "2026-11-24", e: "2026-12-31" }
  ];

  const fixedFeasts = { 
    "2026-01-07":"Genna / ·àç·ã∞·âµ", "2026-01-19":"Timkat / ·å•·àù·âÄ·âµ", "2026-01-20":"Kana Ze Galila / ·âÉ·äì ·ãò·åà·àä·àã", 
    "2026-09-11":"Enkutatash / ·ä•·äï·âÅ·å£·å£·àΩ", "2026-09-27":"Meskel / ·àò·àµ·âÄ·àç" 
  };

  const movingFeasts = {
    "2026-04-12":"Fasika / ·âµ·äï·à£·ä§", "2026-05-21":"Ascension / ·ãï·à≠·åà·âµ", "2026-05-31":"Pentecost / ·å∞·à´·âÖ·àä·å¶·àµ"
  };

  function getEthDate(date) {
    const start = new Date(date.getFullYear() - (date.getMonth() < 8 || (date.getMonth() === 8 && date.getDate() < 11) ? 1 : 0), 8, 11);
    const diff = Math.floor((date - start) / (1000 * 60 * 60 * 24));
    return { day: (diff % 30) + 1, mIdx: Math.floor(diff / 30) };
  }

  async function loadData() {
    try {
      const res = await fetch(SHEET_CSV_URL);
      const text = await res.text();
      const rows = text.split('\n').map(r => r.split(',').map(c => c.trim().replace(/^"|"$/g, '')));
      sheetEvents = rows.slice(1).map(c => ({ date:c[0], title:c[1], grp:c[2]||"", start:c[3], end:c[4], notes:c[5] }));
    } catch(e) {}
    render();
  }

  function render() {
    const grid = document.getElementById('calendarGrid');
    grid.innerHTML = '';
    ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'].forEach(d => grid.innerHTML += `<div class="weekday">${d}</div>`);
    const y = curr.getFullYear(), m = curr.getMonth();
    document.getElementById('monthTitle').innerText = new Intl.DateTimeFormat('en-US', {month:'long', year:'numeric'}).format(curr);
    const first = new Date(y, m, 1).getDay();
    const days = new Date(y, m + 1, 0).getDate();
    const todayStr = new Date().toISOString().split('T')[0];

    for(let i=0; i<first; i++) grid.innerHTML += `<div class="cell" style="background:#F2F2F2"></div>`;

    for(let d=1; d<=days; d++) {
      const dObj = new Date(y, m, d);
      const dStr = dObj.toISOString().split('T')[0];
      const ed = getEthDate(dObj);
      const season = fasts.find(f => dStr >= f.s && dStr <= f.e);
      const isWedFri = (dObj.getDay() === 3 || dObj.getDay() === 5);
      const is50Days = (dStr > "2026-04-12" && dStr <= "2026-05-31");
      const isFastDay = (season || (isWedFri && !is50Days));
      
      const feastName = fixedFeasts[dStr] || movingFeasts[dStr];
      const events = sheetEvents.filter(e => e.date === dStr);
      let isTabot = (ed.mIdx === 3 && ed.day === 19) || (ed.mIdx === 4 && ed.day === 21);

      const cell = document.createElement('div');
      cell.className = `cell ${dStr===todayStr?'today':''} ${isFastDay ? 'fast' : ''} ${(feastName || isTabot) ? 'feast' : ''}`;
      
      let tags = `<span class="tag tag-angel">${monthlyAngels[ed.day] || ''}</span>`;
      if(isTabot) tags += `<span class="tag tag-tabot">‚õ™ ·äï·åç·à• (Tabot)</span>`;
      if(feastName) tags += `<span class="tag tag-feast">${feastName}</span>`;
      
      let isBoundary = false;
      if(season && (dStr === season.s || dStr === season.e)) {
          let label = dStr === season.s ? "·åÄ·àù·à≠" : "·çç·åª·àú";
          tags += `<span class="tag tag-boundary">${label}: ${season.n.split('/')[1] || season.n.split('/')[0]}</span>`;
          isBoundary = true;
      }
      
      events.forEach(e => {
        let cls = e.grp.toLowerCase().includes('school') ? 'tag-ss' : 'tag-gen';
        tags += `<span class="tag ${cls}">${e.title}</span>`;
      });

      cell.innerHTML = `<span class="day-greg">${d}</span><span class="day-eth">${ed.day}</span>${tags}`;
      
      if(events.length > 0 || isTabot || isBoundary || feastName) {
        cell.classList.add('clickable');
        cell.onclick = () => showDetails(dStr, dObj, ed, season, feastName, isTabot, isBoundary, events, isWedFri && !is50Days);
      }
      grid.appendChild(cell);
    }
  }

  function showDetails(dStr, dObj, ed, season, feastName, isTabot, isBoundary, events, wedFri) {
    document.getElementById('modalTitle').innerText = dObj.toDateString();
    let h = `<div style="background:var(--text-primary); color:var(--accent-gold); padding:10px; margin-bottom:15px; font-weight:bold; text-align:center;">${ethMonths[ed.mIdx]} ${ed.day} ‚Äî ${monthlyAngels[ed.day] || ''}</div>`;
    
    if(feastName) h += `<div style="background:#FFF3E0; padding:12px; border:1px solid #FFCCBC; border-radius:4px; margin-bottom:15px; color:#E65100; font-weight:bold; text-align:center;">‚ú® ${feastName}</div>`;
    if(isTabot) h += `<div style="background:var(--accent-gold); padding:12px; border:1px solid var(--text-primary); border-radius:4px; margin-bottom:15px; color:var(--text-primary); font-weight:bold; text-align:center;">‚õ™ Parish Tabot Celebration</div>`;
    if(season) h += `<p style="color:var(--text-primary); background: #FFF0F0; padding: 10px; border-left: 4px solid var(--text-primary);"><b>üôè Fasting Season:</b> ${season.n}</p>`;
    if(wedFri && !season) h += `<p style="color:var(--text-primary); background: #FFF0F0; padding: 10px; border-left: 4px solid var(--text-primary);"><b>üôè Weekly Fast (Wed/Fri)</b></p>`;

    events.forEach(e => {
      h += `<div style="padding:15px; margin-top:15px; background:white; border:1px solid #ddd; border-left:5px solid var(--text-primary);">
        <strong style="color:var(--text-primary); font-size:16px;">${e.title}</strong><br>
        <small style="color:var(--accent-gold); font-weight:bold;">üïí ${e.start} - ${e.end}</small>
        <p style="margin:8px 0 0 0; color:#444; font-size:14px; line-height:1.4;">${e.notes||''}</p>
      </div>`;
    });
    document.getElementById('modalBody').innerHTML = h;
    document.getElementById('detailsModal').style.display = 'flex';
  }

  function goToday() { curr = new Date(); render(); }
  function moveMonth(dir) { curr.setMonth(curr.getMonth() + dir); render(); }
  
  /* INITIALIZE SCRIPT */
  loadData();
</script>
</body>
</html>
