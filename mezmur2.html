<!DOCTYPE html>
<html lang="am">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sacred Mezmurs | Debre Genet EOTC Winnipeg</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Ethiopic:wght@300;700&family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --sky-bg: #F4F8FB;
            --sky-main: #0077CC;
            --sky-deep: #003366;
            --holy-gold: #D4AF37;
            --text-dark: #1A2530;
            --text-soft: #607D8B;
            --white: #FFFFFF;
            --glass-bg: rgba(255, 255, 255, 0.85);
            --shadow: 0 12px 40px rgba(0, 119, 204, 0.12);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background-color: var(--sky-bg); font-family: 'Montserrat', sans-serif; color: var(--text-dark); line-height: 1.6; }
        .ethiopic { font-family: 'Noto Serif Ethiopic', serif; }

        /* --- HEADER & NAVIGATION --- */
        header {
            background: var(--white);
            padding: 30px 20px 15px;
            text-align: center;
            border-bottom: 1px solid #E1F0FF;
            position: sticky; top: 0; z-index: 1000;
        }

        .search-container { max-width: 600px; margin: 15px auto 0; position: relative; }
        .search-input {
            width: 100%; padding: 16px 25px; border-radius: 50px;
            border: 2px solid var(--sky-bg); background: var(--sky-bg);
            font-size: 16px; outline: none; transition: 0.3s;
        }
        .search-input:focus { border-color: var(--sky-main); background: #fff; box-shadow: var(--shadow); }

        .category-scroll {
            display: flex; gap: 10px; overflow-x: auto;
            padding: 15px 5%; background: var(--white);
            scrollbar-width: none; border-bottom: 1px solid #E1F0FF;
        }
        .category-scroll::-webkit-scrollbar { display: none; }
        .cat-chip {
            padding: 8px 18px; border-radius: 50px; background: var(--sky-bg);
            color: var(--sky-deep); font-size: 11px; font-weight: 800;
            white-space: nowrap; cursor: pointer; transition: 0.3s;
            border: 1px solid transparent;
        }
        .cat-chip.active { background: var(--sky-main); color: var(--white); border-color: var(--sky-main); }

        /* --- MEZMUR LIST --- */
        .mezmur-grid { max-width: 800px; margin: 20px auto; padding: 0 20px 100px; }
        .mezmur-card {
            background: var(--white); border-radius: 20px; padding: 20px;
            margin-bottom: 12px; display: flex; align-items: center; gap: 15px;
            box-shadow: var(--shadow); cursor: pointer; transition: 0.3s;
        }
        .mezmur-card:hover { transform: translateX(5px); }
        .m-icon { width: 45px; height: 45px; background: var(--sky-light); color: var(--sky-main); border-radius: 12px; display: grid; place-items: center; font-weight: 800; }
        .m-info { flex: 1; }
        .m-title { font-size: 17px; font-weight: 700; color: var(--sky-deep); display: block; }
        .m-meta { font-size: 10px; color: var(--holy-gold); font-weight: 800; text-transform: uppercase; margin-top: 2px; }

        /* --- MODERN LYRIC DRAWER --- */
        #lyricDrawer {
            position: fixed; bottom: -100%; left: 0; width: 100%; height: 94vh;
            background: var(--white); z-index: 2000; border-radius: 30px 30px 0 0;
            box-shadow: 0 -20px 60px rgba(0,0,0,0.15); transition: 0.5s cubic-bezier(0.19, 1, 0.22, 1);
            display: flex; flex-direction: column; overflow: hidden;
        }
        #lyricDrawer.active { bottom: 0; }

        .drawer-close { position: absolute; top: 20px; right: 25px; font-size: 32px; color: var(--text-soft); cursor: pointer; z-index: 2100; }

        /* Scrollable Lyric Section */
        .drawer-scroll-area { 
            padding: 60px 25px 40px; 
            overflow-y: auto; 
            flex: 1; 
            -webkit-overflow-scrolling: touch;
        }

        .lyric-title-block { text-align: center; margin-bottom: 40px; }
        .lyric-body {
            white-space: pre-line; font-size: 20px; line-height: 2.2;
            color: var(--text-dark); text-align: center; max-width: 550px; margin: 0 auto;
        }

        /* Essential Spacer: Prevents lyrics from being hidden by the player */
        .lyric-spacer { height: 250px; width: 100%; }

        /* --- FLOATING MEDIA PLAYER --- */
        .media-player-container {
            position: absolute; bottom: 0; left: 0; width: 100%;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            padding: 20px 20px 40px; /* Extra bottom padding for mobile home indicators */
            border-top: 1px solid rgba(0, 119, 204, 0.1);
            z-index: 2050;
        }
        .player-inner { max-width: 500px; margin: 0 auto; }
        .player-label { font-size: 9px; font-weight: 800; color: var(--sky-main); letter-spacing: 2px; text-align: center; margin-bottom: 12px; display: block; }
        
        .video-wrapper { width: 100%; aspect-ratio: 16/9; border-radius: 15px; overflow: hidden; background: #000; box-shadow: var(--shadow); }
        .video-wrapper iframe { width: 100%; height: 100%; border: none; }
        
        audio { width: 100%; height: 45px; border-radius: 50px; }

        .overlay { position: fixed; inset: 0; background: rgba(0, 20, 40, 0.6); display: none; z-index: 1500; backdrop-filter: blur(10px); }
        .overlay.active { display: block; }

        @media (min-width: 1024px) {
            #lyricDrawer { width: 550px; right: -550px; left: auto; height: 100vh; border-radius: 30px 0 0 30px; }
            #lyricDrawer.active { right: 0; }
        }
    </style>
</head>
<body>

    <header>
        <a href="index.html" style="text-decoration:none; color:var(--sky-main); font-weight:800; font-size:11px; letter-spacing: 1px;">← RETURN HOME</a>
        <h1 class="ethiopic" style="font-size: 32px; color: var(--sky-deep); margin-top:8px;">የመዝሙር መዝገብ</h1>
        <div class="search-container">
            <input type="text" id="mezmurSearch" class="search-input" placeholder="Search by title or category..." onkeyup="filterMezmurs()">
        </div>
    </header>

    <div class="category-scroll">
        <div class="cat-chip active" onclick="setCategory('all', this)">All Mezmurs</div>
        <div class="cat-chip" onclick="setCategory('St. Mary', this)">ድንግል ማርያም</div>
        <div class="cat-chip" onclick="setCategory('St. Michael', this)">ቅዱስ ሚካኤል</div>
        <div class="cat-chip" onclick="setCategory('St. Gabriel', this)">ቅዱስ ገብርኤል</div>
        <div class="cat-chip" onclick="setCategory('Fast', this)">የጾም መዝሙራት</div>
    </div>

    <div class="mezmur-grid" id="mezmurList">
        <div class="mezmur-card" data-category="St. Mary" onclick="openLyrics('ማርያም ደስ ይበልሽ', 'ማርያም ደስ ይበልሽ በድንግልና\nየአምላክ እናት መሆንሽ ነውና\n\nበቅዱሳን መላእክት የምትመሰገኚ\nከፍጥረታት ሁሉ በላይ የሆንሽ\nየአለም ሁሉ መመኪያ እመቤታችን\nድንግል ማርያም ሆይ ሰላም ላንቺ ይሁን።\n\nእመቤታችን ሆይ በጸሎትሽ አስቢን\nከመከራ ስጋ ከመከራ ነፍስ ጠብቂን።', 'St. Mary', 'https://www.youtube.com/embed/CMSl9QCcIHg')">
            <div class="m-icon">✥</div>
            <div class="m-info">
                <span class="m-title ethiopic">ማርያም ደስ ይበልሽ</span>
                <span class="m-meta">St. Mary • Video Guide</span>
            </div>
            <div style="opacity: 0.2;">▶</div>
        </div>

        <div class="mezmur-card" data-category="St. Gabriel" onclick="openLyrics('ገብርኤል ኃያል', 'ገብርኤል ኃያል መልአከ ሰላም\nበቅዱሳን መላእክት ዘንድ የምትታወቅ\n\nበእሳት ውስጥ የነበሩትን ወጣቶች\nያዳንካቸው አንተ ነህና\nበእኛም ላይ ጠብቅን መከራን አርቅልን።', 'St. Gabriel', 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3')">
            <div class="m-icon">✥</div>
            <div class="m-info">
                <span class="m-title ethiopic">ገብርኤል ኃያል</span>
                <span class="m-meta">St. Gabriel • Audio Guide</span>
            </div>
            <div style="opacity: 0.2;">▶</div>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="closeLyrics()"></div>
    
    <div id="lyricDrawer">
        <div class="drawer-close" onclick="closeLyrics()">&times;</div>
        
        <div class="drawer-scroll-area">
            <div class="lyric-title-block">
                <span id="l-cat" style="font-size: 10px; font-weight: 800; color: var(--holy-gold); letter-spacing: 2px;">CATEGORY</span>
                <h2 id="l-title" class="ethiopic" style="color: var(--sky-main); font-size: 30px; margin-top: 5px;">Title</h2>
            </div>
            
            <p id="l-body" class="ethiopic lyric-body">Lyrics...</p>
            
            <div class="lyric-spacer"></div>
        </div>

        <div class="media-player-container">
            <div class="player-inner">
                <span class="player-label" id="playerType">PRACTICE PLAYER</span>
                <div id="media-content">
                    </div>
            </div>
        </div>
    </div>

    <script>
        let currentCategory = 'all';

        function setCategory(cat, el) {
            document.querySelectorAll('.cat-chip').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            currentCategory = cat;
            filterMezmurs();
        }

        function filterMezmurs() {
            let input = document.getElementById('mezmurSearch').value.toLowerCase();
            let cards = document.getElementsByClassName('mezmur-card');
            for (let card of cards) {
                let title = card.querySelector('.m-title').innerText.toLowerCase();
                let cat = card.getAttribute('data-category');
                card.style.display = (title.includes(input) && (currentCategory === 'all' || cat === currentCategory)) ? "flex" : "none";
            }
        }

        function openLyrics(title, lyrics, category, mediaUrl) {
            document.getElementById('l-title').innerText = title;
            document.getElementById('l-body').innerText = lyrics;
            document.getElementById('l-cat').innerText = category;
            
            const mediaBox = document.getElementById('media-content');
            const typeLabel = document.getElementById('playerType');
            
            if (mediaUrl.includes('youtube.com') || mediaUrl.includes('youtu.be')) {
                typeLabel.innerText = "VIDEO LESSON GUIDE";
                mediaBox.innerHTML = `<div class="video-wrapper"><iframe src="${mediaUrl}" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`;
            } else if (mediaUrl.includes('.mp3') || mediaUrl.includes('.wav')) {
                typeLabel.innerText = "AUDIO PRACTICE GUIDE";
                mediaBox.innerHTML = `<audio controls><source src="${mediaUrl}" type="audio/mpeg"></audio>`;
            } else {
                typeLabel.innerText = "NO MEDIA AVAILABLE";
                mediaBox.innerHTML = `<p style="font-size:11px; color:var(--text-soft); text-align:center;">Practice audio coming soon.</p>`;
            }

            document.getElementById('lyricDrawer').classList.add('active');
            document.getElementById('overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLyrics() {
            document.getElementById('lyricDrawer').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
            document.getElementById('media-content').innerHTML = ""; // Stop playback
            document.body.style.overflow = 'auto';
        }
    </script>
</body>
</html>

